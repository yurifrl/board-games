<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Board Games</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ctext y='14' font-size='14'%3E%F0%9F%8E%B2%3C/text%3E%3C/svg%3E">
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <style>
    body { max-width: 1200px; margin: 0 auto; padding: 24px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 16px; }
    .card { background: #1e1e1e; border-radius: 8px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); position: relative; }
    .title { font-weight: 600; margin: 0; position: absolute; left: 16px; right: 16px; bottom: 36px; }
    .card p { margin: 0; position: absolute; left: 16px; right: 16px; bottom: 12px; }
    .meta { color: #aaa; font-size: 0.9em; }
  </style>
  </head>
<body>
  <h1>Board Games</h1>
  <div style="margin:6px 0 8px;">
    <label for="scope" class="meta" style="font-size:12px;color:#777;margin-right:6px;opacity:.7;">Filter</label>
    <select id="scope" name="scope" hx-get="/games" hx-target="#list" hx-trigger="change" style="display:inline-block;width:auto;height:26px;padding:0 6px;font-size:12px;line-height:1;border-radius:6px;opacity:.7;">
      <option value="">Games only</option>
      <option value="all">All (incl. books)</option>
    </select>
  </div>
  <div id="list" class="grid" hx-get="/games" hx-trigger="load"></div>
  <dialog id="modal" onclick="if (event.target === this) this.close();">
    <article id="modal_content"></article>
  </dialog>
  <script>
    (function(){
      var isMobile = window.matchMedia('(max-width: 640px)').matches;
      if (isMobile) {
        var list = document.getElementById('list');
        if (list) { list.setAttribute('hx-disable', ''); }
        document.addEventListener('click', function(e){
          var a = e.target.closest('a[data-mobile-nav="true"]');
          if (a) {
            // let normal navigation occur for full page on mobile
            a.removeAttribute('hx-get');
            a.removeAttribute('hx-target');
            a.removeAttribute('hx-swap');
            a.removeAttribute('hx-on');
          }
        }, { once: true, passive: true });
      }
    })();
  </script>
</body>
</html>


